import"./modulepreload-polyfill-B5Qt9EMX.js";import"./set-bg-BkyYaBsq.js";const l="https://wbo.ophir.dev",d=new URLSearchParams(location.search),L="moon-v2",b=d.get("lang")||"ko";function k(e,t=1200){return new Promise(n=>{const o=new Image;let g=!1;const i=y=>{g||(g=!0,clearTimeout(w),n(y))},w=setTimeout(()=>i(!1),t);o.onload=()=>i(!0),o.onerror=()=>i(!1),o.src=e.replace(/\/+$/,"")+"/favicon.ico?_="+Date.now()})}async function B(){const e=d.get("wbo");if(e)return e;const t=location.hostname;if(t==="localhost"||t==="127.0.0.1"||t.endsWith(".local")){const n="http://localhost:5001";return await k(n)?n:l}return l}const p=document.getElementById("adminBtn");function a(){const e=d.get("token");return e||localStorage.getItem("wboAdminToken")||""}function h(e){e&&e.trim()?localStorage.setItem("wboAdminToken",e.trim()):localStorage.removeItem("wboAdminToken"),p.textContent=a()?"Admin ON":"Admin"}h(a());function r(e,t=L){let n=`${e.replace(/\/+$/,"")}/boards/${encodeURIComponent(t)}?lang=${encodeURIComponent(b)}`;const o=a();return o&&(n+=`&token=${encodeURIComponent(o)}`),n}const I=new URL("../main/main.html",location.href).href,T=new URL("../licenses/license.html",location.href).href;document.getElementById("goHome").href=I;document.getElementById("goLic").href=T;const m=document.getElementById("wboFrame"),A=document.getElementById("fallback"),E=document.getElementById("fallbackOpen");let v=!1;m.addEventListener("load",()=>{v=!0});let c=l;(async()=>{c=await B();const e=r(c);m.src=e,E.href=e,setTimeout(()=>{v||(A.style.display="grid")},2500)})();document.getElementById("openWindow").addEventListener("click",()=>{window.open(r(c),"_blank","noopener")});document.getElementById("shareBtn").addEventListener("click",async()=>{const e=r(c);try{await navigator.clipboard.writeText(e);const t=document.getElementById("shareBtn"),n=t.textContent;t.textContent="Copied!",setTimeout(()=>t.textContent=n,1200)}catch{prompt("아래 링크를 복사하세요",e)}});p.addEventListener("click",()=>{const e=a(),t=prompt(`관리자 JWT 토큰을 붙여넣으세요.
(비우고 확인하면 토큰 제거)`,e||"");if(t===null)return;h(t);const n=r(c);m.src=n,E.href=n});const s=document.getElementById("navDrop"),u=document.getElementById("navToggle");document.getElementById("navMenu");function f(){s.classList.remove("open"),u.setAttribute("aria-expanded","false")}function R(){s.classList.add("open"),u.setAttribute("aria-expanded","true")}u.addEventListener("click",e=>{e.stopPropagation(),s.classList.contains("open")?f():R()});document.addEventListener("click",e=>{s.contains(e.target)||f()});document.addEventListener("keydown",e=>{e.key==="Escape"&&f()});
